<?xml version="1.0" encoding="ISO-8859-1"?>
<document>
	<properties>
		<title>API</title>
	</properties>
	<body>
		<section name="API">
			<p>
				BibSonomy provides a webservice using Representational State Transfer (REST), a
				software architectural style for distributed hypermedia systems. The term originated
				in a 2000 doctoral dissertation about the web written by Roy Fielding, one of the
				principal authors of the HTTP protocol specification. This site is intended for
				developers who want to develop applications which interact with BibSonomy.
			</p>
			<p>
				You can use the provided client library, written in Java, to access the API or you
				can directly interact with the webservice if you would like to write a client in a
				language other than Java. Furthermore, there is a customized JabRef-Client available:
				<ul>
					<li>
						<a href="javaclient.html">Java client library</a>
					</li>
					<li>
						<a href="genericclient.html">direct access</a>
					</li>
					<li>
						<a href="jabrefclient.html">JabRef client</a>
					</li>					
				</ul>
			</p>
			<subsection name="Methods">
				<p>
					For the uniform addressing and identification a URL pattern was specified. The
					individual inquiries can be partly supplemented with attributes of the form
					<em>key=value</em>
					.
				</p>
				<p>
					An overview of the currently available methods is outlined in the following
					table.
				</p>
				<p>
					<table>
						<tr>
							<th>Description</th>
							<th>HTTP</th>
							<th>Path</th>
							<th>Status</th>
						</tr>
						<tr>
							<th>Users</th>
							<th></th>
							<th></th>
							<th></th>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfAllUsers.html">List of all users</a>
							</td>
							<td>GET</td>
							<td>/users</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/CreateUser.html">Create a user</a>
							</td>
							<td>POST</td>
							<td>/users</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DetailsForUser.html">Details for a user</a>
							</td>
							<td>GET</td>
							<td>/users/[username]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ChangeUserDetails.html">Change user details</a>
							</td>
							<td>PUT</td>
							<td>/users/[username]</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DeleteUser.html">Delete user</a>
							</td>
							<td>DELETE</td>
							<td>/users/[username]</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfPostsForUser.html">
									List of posts for a users
								</a>
							</td>
							<td>GET</td>
							<td>
								/users/[username]/posts ?tags=[t1+t2+...+tn]
								?resourcetype=(bibtex|bookmark)
							</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/CreatePost.html">Create post</a>
							</td>
							<td>POST</td>
							<td>/users/[username]/posts</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DetailsForPost.html">Details for a post</a>
							</td>
							<td>GET</td>
							<td>/users/[username]/posts/[resourceHash]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ChangePost.html">Change post</a>
							</td>
							<td>PUT</td>
							<td>/users/[username]/posts/[resourceHash]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DeletePost.html">Delete post</a>
							</td>
							<td>DELETE</td>
							<td>/users/[username]/posts/[resourceHash]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfConceptsForUser.html">List of concepts for a user</a></td>
							<td>GET</td>
							<td>/users/[username]/concepts ?status=(all|picked)</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>	
						<tr>
							<td>
								<a href="methods/DetailsForConceptOfUser.html">Details for a concept for a user</a></td>
							<td>GET</td>
							<td>/users/[username]/concepts/[conceptname]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/CreateConcept.html">Create concept</a></td>
							<td>POST</td>
							<td>/users/[username]/concepts/[conceptname]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ChangeConcept.html">Update concept</a></td>
							<td>PUT</td>
							<td>/users/[username]/concepts/[conceptname]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DeleteConcept.html">Delete concept</a></td>
							<td>DELETE</td>
							<td>/users/[username]/concepts/[conceptname]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<th>Groups</th>
							<th></th>
							<th></th>
							<th></th>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfAllGroups.html">List of all groups</a>
							</td>
							<td>GET</td>
							<td>/groups</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/CreateGroup.html">Create a group</a>
							</td>
							<td>POST</td>
							<td>/groups</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DetailsForGroup.html">Details for a group</a>
							</td>
							<td>GET</td>
							<td>/groups/[groupname]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ChangeGroup.html">Change group</a>
							</td>
							<td>PUT</td>
							<td>/groups/[groupname]</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DeleteGroup.html">Delete group</a>
							</td>
							<td>DELETE</td>
							<td>/groups/[groupname]</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfUsersForGroup.html">
									List of users for a group
								</a>
							</td>
							<td>GET</td>
							<td>/groups/[groupname]/users</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/AddUserToGroup.html">Add user to a group</a>
							</td>
							<td>POST</td>
							<td>/groups/[groupname]/users</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/DeleteUserFromGroup.html">
									Remove user from a group
								</a>
							</td>
							<td>DELETE</td>
							<td>/groups/[groupname]/users/[username]</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<th>Global - Tags</th>
							<th></th>
							<th></th>
							<th></th>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfAllTags.html">List of all tags</a>
							</td>
							<td>GET</td>
							<td>
								/tags ?filter=[regex] ?(user|group|viewable)=[username/groupname]
								?order=(frequency)
							</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								Details for a tag; details for a list of
								sub-/super-/correlated-tags
							</td>
							<td>GET</td>
							<td>/tags/[tag]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>Substitute the shared appearance of t1,t2,... with T1,T2,...</td>
							<td>PUT</td>
							<td>/substitutetags ?from=[t1+t2+..]&amp;to=[T1+T2+..]</td>
							<td>
								<img src="images/icon_error_sml.gif" />
							</td>
						</tr>
						<tr>
							<th>Global - Concepts</th>
							<th></th>
							<th></th>
							<th></th>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfPopularConcepts.html">List of popular concepts</a></td>
							<td>GET</td>
							<td>/concepts</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>	
						<tr>
							<td>
								<a href="methods/DetailsForConcept.html">Details for a concept</a></td>
							<td>GET</td>
							<td>/concepts/[conceptname]</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>						
						<tr>
							<th>Global - Posts</th>
							<th></th>
							<th></th>
							<th></th>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfAllPosts.html">List of all posts</a>
							</td>
							<td>GET</td>
							<td>
								/posts ?tags=[t1+t2+...+tn] ?resourcetype=(bibtex|bookmark)
								?(user|group|viewable)=[username/groupname] ?resource=[hash] ?search=[search_string]
							</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfRecentPosts.html">List of recent posts</a>
							</td>
							<td>GET</td>
							<td>/posts/added ?resourcetype=(bibtex|bookmark)</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
						<tr>
							<td>
								<a href="methods/ListOfPopularPosts.html">List of popular posts</a>
							</td>
							<td>GET</td>
							<td>/posts/popular ?resourcetype=(bibtex|bookmark)</td>
							<td>
								<img src="images/icon_success_sml.gif" />
							</td>
						</tr>
					</table>
				</p>
				<p>
					All URLs can be supplemented by these attributes (use
					<em>start</em>
					and
					<em>end</em>
					only with lists):
					<ul>
						<li>?format=(xml|rdf|owl) <em>*)</em></li>
						<li>?start=[int], starting at 0, default 0 <em>**)</em></li>
						<li>?end=[int], starting at 0, default 20 <em>**)</em></li>
					</ul>
				</p>
				<p>
					Tags can be customized the following way:
					<ul>
						<li>->[tag] tag and its direct children</li>
						<li>-->[tag] tag and its children (transitive)</li>
						<li>[tag]-> tag and its direct parents</li>
						<li>[tag]--> tag and its parents (transitive)</li>
						<li>&lt;-&gt;[tag] tag and its correlated tags</li>
					</ul>
				</p>
				<p>
					<b>Fulltext search</b> on publications or bookmarks can be done via 
					<tt>/posts?search=[search_string]&amp;resourcetype=(bibtex|bookmark)</tt>, see above.
					The search covers all available metadata for a post (e.g. title, authors, ISBN, DOI, ...)
					as well as associated tags.

					The standard behaviour when you supply more than one search term (separated by + or spaces)					 	
					is that matches will be returned which contain both terms, i.e.
					<tt>/posts?resourcetype=bibtex&amp;search=folksonomy+folksonomies</tt>

					will return publications which contain both <em>folksonomy</em> and 
					<em>folksonomies</em> in any metadata field.

					Apart from this, you can enhance your search in the following ways:

					<ul>
						<li><em>exclude terms:</em><tt>/posts/?search=folksonomy -ontology</tt>
						    will return matches that contain folksonomy, but not ontology
					   	 </li>
						 <li><em>phrase search</em><tt>/posts/?search="folksonomies are cool"</tt>
							will return matches that contain the whole phrase "folksonomies are cool",
							but not matches that contain e.g. "folksonomies are not cool".
						</li>					    
						<li><em>wildcards:</em><tt>/posts/?search=folksonom*</tt>
							will return matches that contain "folksonomy, folksonomies, ...".
						</li>					    						
					</ul>

					<b>Special characters in search terms:</b> Please note that all special 
					(i.e. non-alphanumeric) characters occuring in search terms apart from "_" and "'"
					are treated as search term separators - if you search e.g. for an ISBN like 
					<tt>/posts?search=978-0-387-71000-6</tt>						
					, then you also an entry with ISBN 387-0-978-71000-6 will be matched, because the
					number blocks are treated as distinct search terms, which is not what you want. In
					such a case, phrase search will yield the expected result:

					<ul>
						<li><tt>/posts?search="978-0-387-71000-6"</tt></li>						
					</ul>					
			
					
				</p>				
            <p>
              <em>*)</em> Please note: RDF and OWL are not supported at the moment.<br/>
              <em>**)</em> ?start=0&amp;end=20 is a list of the first 20 entities (exclusively the 'end'-value).
            </p>
			</subsection>
         <subsection name="Errors">
            <p>
               In case of an error the API sends the appropriate HTTP 
               status code (please see the details of each request) and a XML 
	       document including a description of the error that occurred.
	       
	       In addition to that, the XML root element contains an attribute <em>stat</em>,
	       whose value will be <em>"fail"</em> in case of an error, and <em>"ok"</em> 
	       otherwise.
            </p>
            <br/>
            <p>
               <pre>
  &lt;bibsonomy stat="fail">
    &lt;error>some error message&lt;/error>
  &lt;/bibsonomy>
               </pre>
            </p>
         </subsection>
		</section>
	</body>
</document>
