<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="UserCommon">

	<resultMap id="userForGroup" extends="Common.user" class="user">
		<result property="homepage"   column="user_homepage"  javaType="url"  />
		<result property="realname"   column="user_realname"  javaType="string" />
	</resultMap>
	
	<resultMap id="userWithWeight" extends="Common.user" class="user">
		<result property="prediction" column="weight"         javaType="integer"/>
	</resultMap>

	<resultMap id="user" class="user" extends="userForGroup">
		<result property="apiKey"           column="api_key"       javaType="string" />
		<result property="birthday"         column="birthday"      javaType="date" />
		<result property="email"            column="user_email"    javaType="string" />				
		<result property="gender"           column="gender"        javaType="string" />
		<result property="hobbies"          column="hobbies"       javaType="string" />
		<result property="interests"        column="interests"     javaType="string" />
		<result property="IPAddress"        column="ip_address"    javaType="string" />
		<result property="openURL"          column="openurl"       javaType="string" />
		<result property="password"         column="user_password" javaType="string" />
		<result property="place"            column="place"         javaType="string" />
		<result property="profession"       column="profession"    javaType="string" />
		<result property="registrationDate" column="reg_date"      javaType="date" />
		<result property="spammer"          column="spammer"       javaType="boolean" />
		<result property="role"             column="role"          javaType="Role" />	
		<result property="updatedBy"        column="updated_by"    javaType="string" />
		<result property="updatedAt"	    column="updated_at"    javaType="date" />
		<result property="toClassify"       column="to_classify"   javaType="integer" />
		<result property="reminderPassword" column="tmp_password"  javaType="string" />
		<result property="reminderPasswordRequestDate" column="tmp_request_date"  javaType="date" />			
	</resultMap>
	
	<resultMap id="userWithPrediction" extends="user" class="user">
		<result property="prediction" 	column="prediction" javaType="integer"/>
		<result property="mode" 		column="mode"       javaType="string"/>
		<result property="algorithm" 	column="algorithm"	javaType="string"/>
		<result property="confidence"   column="confidence" javaType="double" />
	</resultMap>

	<resultMap id="userWithSettings"  class="user" extends="user"> 
		<result property="settings"   resultMap="UserCommon.userSettings"/>
	</resultMap>

	<resultMap id="userSettings" class="userSettings">
		<result property="listItemcount"   column="list_itemcount" javaType="integer" />	
		<result property="tagboxMinfreq"   column="tagbox_minfreq" javaType="integer" />
		<result property="tagboxSort"      column="tagbox_sort"    javaType="integer" />
		<result property="tagboxStyle"     column="tagbox_style"   javaType="integer" />
		<result property="tagboxTooltip"   column="tagbox_tooltip" javaType="integer" />	
		<result property="logLevel"        column="log_level"      javaType="integer" />
		<result property="defaultLanguage" column="lang" 	       javaType="string" />	
		<result property="confirmDelete"   column="confirmDelete"  javaType="boolean" />
		<result property="profilePrivlevel" column="profilegroup"   javaType="ProfilePrivlevel" />				
	</resultMap>	

	<sql id="allUserAttributes">
		<include refid="commonUserAttributes"/>,
		<include refid="userSettingsAttributes"/> 
	</sql>

	<sql id="commonUserAttributes">
		user_name, user_email, user_homepage, user_realname, user_password, 
		api_key, birthday, gender, hobbies, interests, ip_address, openurl, place, profession, 
		reg_date, spammer, role, updated_by, updated_at, to_classify, tmp_password, tmp_request_date
	</sql>

	<sql id="userSettingsAttributes">
		tagbox_style, tagbox_sort, tagbox_minfreq, tagbox_tooltip, list_itemcount, lang, log_level, confirmDelete, profilegroup
	</sql>	

</sqlMap>