<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="CRISLinkCommon">

    <!-- a simple cris link, which only contains the information and no link source or target -->
    <resultMap id="simpleCrisLink" class="crisLink" groupBy="id">
        <result property="id"			column="id"             javaType="int" />
        <result property="linkType"     column="linktype_value" javaType="crisLinkType" />
        <result property="startDate" 	column="start_date"		javaType="date" />
        <result property="endDate"	    column="end_date"	    javaType="date" />
        <result property="dataSource"   column="link_source"    javaType="crisLinkDataSource" />
    </resultMap>
    
    <resultMap id="personCrisLink" class="crisLink" groupBy="id" extends="simpleCrisLink">
        <result property="target"    resultMap="PersonCommon.simplePerson" />
    </resultMap>

    <sql id="allCRISLinkAttributes">
        id, source_id, source_type, target_id, target_type, start_date, end_date, linktype_type, linktype_value,
        link_source, updated_by, updated_at
    </sql>

    <sql id="simpleCRISColumns">
        id, start_date, end_date, linktype_type, linktype_value, link_source
    </sql>

</sqlMap>