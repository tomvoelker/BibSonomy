<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="GroupCommon">

	<resultMap id="group_basic"	class="group">
		<result property="groupId"         	 	column="group"             javaType="int" />
		<result property="name"             	column="group_name"        javaType="string" />
		<result property="privlevel"        	column="privlevel"         javaType="Privlevel"/>
		<result property="sharedDocuments"  	column="sharedDocuments"   javaType="boolean"/>
	</resultMap>

	<resultMap id="groupWithUserSharedDocuments" extends="group_basic" class="group">
		<result property="userSharedDocuments" 	column="userSharedDocuments" javaType="boolean" />
		<result property="publicationReportingSettings" resultMap="GroupCommon.publReportingSettings" />
	</resultMap>
	
	<resultMap id="publReportingSettings" class="publicationReportingSettings">
		<result property="reportingMailAddress" column="publ_reporting_mail" javaType="string" />
		<result property="reportingMailTemplate" column="publ_reporting_mail_template" javaType="string"/>
		<result property="externalReportingUrl" column="publ_reporting_external_url" javaType="string" />
	</resultMap>

	<resultMap id="group" class="group" extends="group_basic" groupBy="name">
		<result property="realname"         column="realname"          javaType="string" />
		<result property="homepage"         column="homepage"          javaType="url" />
		<result property="publicationReportingSettings" resultMap="GroupCommon.publReportingSettings" />
	</resultMap>

	<resultMap id="groupWithMembers" class="group" extends="group_basic" groupBy="name">
		<result property="users"    resultMap="UserCommon.userForGroup" />
		<result property="userSharedDocuments" 	column="userSharedDocuments" javaType="boolean"/>
	</resultMap>
	
	<resultMap id="tagsets" class="tagset" groupBy="setName">
		<result property="setName"   	column="set_name"  	javaType="string"  />
		<result property="tags"         resultMap="Common.tag" />
	</resultMap>
	
	<sql id="reportingColumns">
		i.publ_reporting_mail, i.publ_reporting_mail_template, i.publ_reporting_external_url
	</sql>
</sqlMap>