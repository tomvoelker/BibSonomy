<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	                    http://www.springframework.org/schema/util 
	                    http://www.springframework.org/schema/util/spring-util-3.0.xsd">
	
	
	<import resource="classpath:org/bibsonomy/bibsonomy-model-context.xml"/>
	<import resource="classpath:org/bibsonomy/bibsonomy-database-common-context.xml" />
	<!-- import system tag context -->
	<import resource="classpath:org/bibsonomy/bibsonomy-systemtags-context.xml"/>

	<!-- publication chain -->
	<bean id="publicationChainElement" class="org.bibsonomy.database.managers.chain.resource.ResourceChainElement" abstract="true">
		<property name="databaseManager" ref="publicationDatabaseManager" />
	</bean>
	
	<bean id="publicationChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.bibtex.get.GetBibtexByResourceSearch" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesWithDiscussions" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByParent" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.bibtex.get.GetBibtexWithRepository" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.bibtex.get.GetBibtexByKey" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesForHomepage" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesPopular" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesForUser" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByTagNames" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByHashForUser" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByHash" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByTagNamesAndUser" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesViewable" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByConceptForUser" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesOfFriendsByUser" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesOfFriendsByTags" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByFriends" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByFollowedUsers" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.bibtex.get.GetBibtexFromClipboardForUser" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesFromInbox" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByTaggedUserRelation" parent="publicationChainElement" />
			</list>
		</property>
	</bean>
	
	<!-- bookmark chain -->
	<bean id="bookmarkChainElement" class="org.bibsonomy.database.managers.chain.resource.ResourceChainElement" abstract="true">
		<property name="databaseManager" ref="bookmarkDatabaseManager" />
	</bean>
	
	<bean id="bookmarkChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.bookmark.get.GetBookmarksByResourceSearch" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesWithDiscussions" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByParent" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesForHomepage" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesPopular" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesForUser" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByTagNames" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByHashForUser" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByHash" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByTagNamesAndUser" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesViewable" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByConceptForUser" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesOfFriendsByUser" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesOfFriendsByTags" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByFriends" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByFollowedUsers" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesFromInbox" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourcesByTaggedUserRelation" parent="bookmarkChainElement" />
			</list>
		</property>
	</bean>
	
	<!-- concept chain -->
	<bean id="conceptChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.concept.get.GetAllConcepts" />
				<bean class="org.bibsonomy.database.managers.chain.concept.get.GetAllConceptsForUser" />
				<bean class="org.bibsonomy.database.managers.chain.concept.get.GetPickedConceptsForUser" />
			</list>
		</property>
	</bean>
	
	<!-- discussion chain -->
	<bean id="discussionChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.discussion.get.GetDiscussionSpaceByHash" />
			</list>
		</property>
	</bean>
	
	<!-- tag chain -->
	<bean id="tagChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByResourceSearch" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByUser" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByFriendOfUser" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetAllTags" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetSimilarTags" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetRelatedTags" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsViewable" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByExpression" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByHash" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByHashForUser" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetPopularTags" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByBibtexkey" />
				<bean class="org.bibsonomy.database.managers.chain.tag.get.GetTagsByTaggedUserRelation" />
			</list>
		</property>
	</bean>
	
	<!-- user chain -->
	<bean id="userChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetUsersByGroup" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetRelatedUsersByUser" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetRelatedUsersByTags" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetFriendsOfUser" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetUserFriends" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetFollowersOfUser" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetUserFollowers" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetAllUsers" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetPendingUsers" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetPendingUserByUsername" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetPendingUserByActivationCode" />
				<bean class="org.bibsonomy.database.managers.chain.user.get.GetUsersBySearch" />
			</list>
		</property>
	</bean>

	<!-- project chain -->
	<bean id="abstractProjectChainElement" class="org.bibsonomy.database.managers.chain.project.ProjectChainElement" abstract="true">
		<property name="projectDatabaseManager"	ref="projectDatabaseManager" />
	</bean>

	<bean id="projectChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.project.GetProjectsByProjectSearch" parent="abstractProjectChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.project.GetProjectsByInternalId" parent="abstractProjectChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.project.GetAllProjects" parent="abstractProjectChainElement"/>
			</list>
		</property>
	</bean>

	<bean id="abstractProjectStatisticsChainElement" class="org.bibsonomy.database.managers.chain.statistic.project.ProjectStatisticsChainElement" abstract="true">
		<property name="projectDatabaseManager" ref="projectDatabaseManager" />
	</bean>

	<bean id="projectStatisticsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.project.GetProjectsByFulltextSearchCount" parent="abstractProjectStatisticsChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.project.GetAllProjectsCount" parent="abstractProjectStatisticsChainElement" />
			</list>
		</property>
	</bean>

	<!-- post statistic chain -->
	<bean id="postStatisticChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetUserDiscussionsStatistics" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesForGroupCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesWithDiscussionsCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesForUserCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesByTagNamesAndUserCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesByTagNamesCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesDuplicateCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesPopularDaysCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesForHashCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.GetResourcesForUserInboxCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.GetClipboardPostsCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.GetClipboardPostsHistoryCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.GetAllPostsInHistoryCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.GetUniqueResourcesCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.GetAllPostsCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.post.get.DefaultCatchAllCount" />
			</list>
		</property>
	</bean>
	
	<!-- tag statistic chain -->
	<bean id="tagStatisticChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.tag.GetGlobalTagCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.tag.GetGlobalTasCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.tag.GetGlobalConceptCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.tag.GetGlobalConceptHistoryCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.tag.get.GetRelationCountByUser" />
			</list>
		</property>
	</bean>
	
	<!-- user statistic chain -->
	<bean id="userStatisticsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.user.GetUserClassifiedByClassifierCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.user.GetUserClassifiedByAdminCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.user.GetActiveUserCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.user.GetFriendHistoryCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.user.GetGroupMembershipHistoryCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.user.GetAllUserCount" />
			</list>
		</property>
	</bean>

	<!-- document statistic chain -->
	<bean id="documentStatisticsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.document.GetGlobalLayoutDocumentCount" />
				<bean class="org.bibsonomy.database.managers.chain.statistic.document.GetGlobalDocumentCount" />
			</list>
		</property>
	</bean>

	<!-- goldstandard bookmark -->
	<bean id="goldStandardBookmarkStatisticsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.goldstandard.GetPostsByFulltextSearchCount">
					<constructor-arg ref="goldStandardBookmarkDatabaseMananger" />
				</bean>
			</list>
		</property>
	</bean>

	<!-- goldstandard publication -->
	<bean id="goldStandardPublicationStatisticsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.goldstandard.GetPostsByFulltextSearchCount">
					<constructor-arg ref="goldStandardPublicationDatabaseManager" />
				</bean>
			</list>
		</property>
	</bean>

	<!-- get groups chain -->
	<bean id="queryGroupsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.group.get.GetGroupsByInternalId">
						<constructor-arg ref="groupDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.group.get.GetPendingGroups">
					<constructor-arg ref="groupDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.group.get.GetGroupsByUser">
					<constructor-arg ref="groupDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.group.get.GetGroupsBySearch">
					<constructor-arg ref="groupDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.group.get.GetOrganizationGroups">
					<constructor-arg ref="groupDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.group.get.GetAllGroups">
					<constructor-arg ref="groupDatabaseManager" />
				</bean>
			</list>
		</property>
	</bean>

	<bean id="abstractPersonChainElement" abstract="true" class="org.bibsonomy.database.managers.chain.person.PersonChainElement">
		<constructor-arg ref="personDatabaseManager" />
	</bean>

	<bean id="personChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.person.GetPersonsByUserName" parent="abstractPersonChainElement"/>
				<bean class="org.bibsonomy.database.managers.chain.person.GetPersonsByOrganization" parent="abstractPersonChainElement"/>
				<bean class="org.bibsonomy.database.managers.chain.person.GetPersonsByAdditionalKey" parent="abstractPersonChainElement"/>
				<bean class="org.bibsonomy.database.managers.chain.person.GetPersonsByFulltextSearch" parent="abstractPersonChainElement" />
			</list>
		</property>
	</bean>

	<bean id="personRelationChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.personresourceRelation.GetResourcePersonRelationsByInterhashIndexAndType">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.personresourceRelation.GetResourcePersonRelationsWithPersonsByInterhash">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.personresourceRelation.GetResourcePersonRelationsOnlyTheses">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.personresourceRelation.GetResourcePersonRelationsWithPosts">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.personresourceRelation.GetResourcePersonRelationsByChangeDate">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
			</list>
		</property>
	</bean>

	<bean id="personStatisticsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.person.GetPersonsByOrganizationCount">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.managers.chain.statistic.person.GetPersonsByFulltextSearchCount">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
			</list>
		</property>
	</bean>

	<bean id="resourcePersonRelationsStatisticsChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.statistic.relations.GetAllRelationsCount">
					<constructor-arg ref="personDatabaseManager" />
				</bean>
			</list>
		</property>
	</bean>

	<bean id="databaseValidator" class="org.bibsonomy.database.validation.DatabaseModelValidator">
		<property name="databaseSchemaInformation" ref="dbSchemaInformation" />
	</bean>

	<bean id="generalDatabaseManager" class="org.bibsonomy.database.managers.GeneralDatabaseManager" factory-method="getInstance" />

	<bean id="adminDatabaseManager" class="org.bibsonomy.database.managers.AdminDatabaseManager" factory-method="getInstance">
		<property name="userDatabaseManager" ref="userDatabaseManager" />
		<property name="groupDatabaseManager" ref="groupDatabaseManager" />
	</bean>
	
	<bean id="statisticsDatabaseManager" class="org.bibsonomy.database.managers.StatisticsDatabaseManager" factory-method="getInstance">
		<property name="postChain" ref="postStatisticChain" />
		<property name="tagChain" ref="tagStatisticChain" />
		<property name="userChain" ref="userStatisticsChain" />
		<property name="documentChain" ref="documentStatisticsChain" />
	</bean>
		
	<bean id="discussionDatabaseManager" class="org.bibsonomy.database.managers.discussion.DiscussionDatabaseManager" factory-method="getInstance">
		<property name="chain" ref="discussionChain" />
	</bean>
	
	<bean id="documentDatabaseManager" class="org.bibsonomy.database.managers.DocumentDatabaseManager" factory-method="getInstance">
		<property name="userDatabaseManager" ref="userDatabaseManager" />
	</bean>
	
	<bean id="userDatabaseManager" class="org.bibsonomy.database.managers.UserDatabaseManager" factory-method="getInstance">
		<property name="chain" ref="userChain" />
		<property name="validator" ref="databaseValidator" />
		<property name="fileLogic" ref="fileLogic" />
		<property name="usersDefaultToClassify" value="${user.defaultToClassify}" />
	</bean>

	<bean id="permissionDatabaseManager" class="org.bibsonomy.database.managers.PermissionDatabaseManager" factory-method="getInstance">
		<property name="maxQuerySize" value="${database.maxQuerySize}" />
		<property name="specialUserTagMap" value="${system.specialUsersTagMap}" />
	</bean>
	
	<bean id="groupDatabaseManager" class="org.bibsonomy.database.managers.GroupDatabaseManager" factory-method="getInstance">
		<property name="userDb" ref="userDatabaseManager" />
		<property name="chain" ref="queryGroupsChain" />
		<property name="groupSearch" ref="groupSearch" />
	</bean>
	
	<bean id="postDatabaseManager" class="org.bibsonomy.database.managers.PostDatabaseManager" abstract="true">
		<property name="validator" ref="databaseValidator" />
		<property name="modelValidator" ref="dbModelValidator" />
	</bean>
	
	<bean id="bookmarkDatabaseManager" class="org.bibsonomy.database.managers.BookmarkDatabaseManager" factory-method="getInstance" parent="postDatabaseManager">
		<property name="resourceSearch" ref="bookmarkSearch" />
		<property name="chain" ref="bookmarkChain" />
	</bean>
	
	<bean id="publicationDatabaseManager" class="org.bibsonomy.database.managers.BibTexDatabaseManager" factory-method="getInstance" parent="postDatabaseManager">
		<property name="userDb" ref="userDatabaseManager" />
 		<property name="resourceSearch" ref="publicationSearch" />
		<property name="chain" ref="publicationChain" />
		<property name="fileLogic" ref="fileLogic" />
	</bean>
	
	<bean id="tagRelationDatabaseManager" class="org.bibsonomy.database.managers.TagRelationDatabaseManager" factory-method="getInstance">
		<property name="chain" ref="conceptChain" />
	</bean>
	
	<bean id="tagDatabaseManager" class="org.bibsonomy.database.managers.TagDatabaseManager" factory-method="getInstance">
		<property name="permissionDatabaseManager" ref="permissionDatabaseManager" />
		<property name="bookmarkSearch" ref="bookmarkSearch" />
		<property name="publicationSearch" ref="publicationSearch" />
		<property name="chain" ref="tagChain" />
	</bean>
	
	<bean id="goldStandardBookmarkDatabaseMananger" class="org.bibsonomy.database.managers.GoldStandardBookmarkDatabaseManager" factory-method="getInstance">
		<property name="search" ref="goldStandardBookmarkSearch" />
		<property name="chain" ref="goldStandardBookmarkChain" />
		<property name="statisticsChain" ref="goldStandardBookmarkStatisticsChain" />
	</bean>
	
	<bean id="goldStandardPublicationDatabaseManager" class="org.bibsonomy.database.managers.GoldStandardPublicationDatabaseManager" factory-method="getInstance">
		<property name="search" ref="goldStandardPublicationSearch" />
		<property name="chain" ref="goldStandardPublicationChain" />
		<property name="statisticsChain" ref="goldStandardPublicationStatisticsChain" />
	</bean>	

	<bean id="goldStandardBookmarkChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourceHistory" parent="bookmarkChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.goldstandard.get.GetGoldStandardsByResourceSearch" parent="abstractGoldStandardBookmarkChainElement" />
			</list>
		</property>
	</bean>
	
	<bean id="goldStandardPublicationChain" class="org.bibsonomy.database.managers.chain.Chain">
		<property name="elements">
			<list>
				<bean class="org.bibsonomy.database.managers.chain.resource.get.GetResourceHistory" parent="publicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.goldstandard.get.GetGoldStandardsByChangeDate" parent="abstractGoldStandardPublicationChainElement" />
				<bean class="org.bibsonomy.database.managers.chain.goldstandard.get.GetGoldStandardsByResourceSearch" parent="abstractGoldStandardPublicationChainElement" />
			</list>
		</property>
	</bean>
	
	<bean id="abstractGoldStandardPublicationChainElement" class="org.bibsonomy.database.managers.chain.goldstandard.get.GoldStandardChainElement" abstract="true">
		<property name="databaseManager" ref="goldStandardPublicationDatabaseManager" />
	</bean>
	
	<bean id="abstractGoldStandardBookmarkChainElement" class="org.bibsonomy.database.managers.chain.goldstandard.get.GoldStandardChainElement" abstract="true">
		<property name="databaseManager" ref="goldStandardBookmarkDatabaseMananger" />
	</bean>
	
	<bean id="personDatabaseManager" class="org.bibsonomy.database.managers.PersonDatabaseManager" factory-method="getInstance">
		<property name="personSearch" ref="personSearch" />
		<property name="goldStandardPublicationDatabaseManager" ref="goldStandardPublicationDatabaseManager" />
		<property name="publicationDatabaseManager" ref="publicationDatabaseManager" />
		<property name="crisLinkDatabaseManager" ref="crisLinkDatabaseManger" />
		<property name="chain" ref="personChain" />
		<property name="personResourceRelationChain" ref="personRelationChain" />
		<property name="statisticsChain" ref="personStatisticsChain" />
	</bean>

	<bean id="personResourceRelationDatabaseManager" class="org.bibsonomy.database.managers.PersonResourceRelationDatabaseManager">
		<property name="statisticsChain" ref="resourcePersonRelationsStatisticsChain" />
	</bean>
	
	<bean id="clipboardDatabaseManager" class="org.bibsonomy.database.managers.ClipboardDatabaseManager" factory-method="getInstance" />

	<bean id="projectDatabaseManager" class="org.bibsonomy.database.managers.ProjectDatabaseManager">
		<property name="generalDatabaseManager" ref="generalDatabaseManager" />
		<property name="crisLinkDatabaseManager" ref="crisLinkDatabaseManger" />
		<property name="plugins" ref="databasePluginManager" />
		<property name="validator" ref="projectValidator" />
		<property name="chain" ref="projectChain" />
		<property name="statisticsChain" ref="projectStatisticsChain" />
		<property name="search" ref="projectSearch" />
	</bean>

	<bean id="crisLinkDatabaseManger" class="org.bibsonomy.database.managers.CRISLinkDatabaseManager">
		<property name="generalDatabaseManager" ref="generalDatabaseManager" />
		<property name="crisManagers">
			<map>
				<entry key-ref="projectClass" value-ref="projectDatabaseManager" />
				<entry key-ref="personClass" value-ref="personDatabaseManager" />
				<entry key-ref="groupClass" value-ref="groupDatabaseManager" />
			</map>
		</property>
		<property name="checkers">
			<list>
				<bean class="org.bibsonomy.database.managers.util.cris.ProjectPersonLinkDirectionChecker" />
				<bean class="org.bibsonomy.database.managers.util.cris.GroupPersonLinkDirectionChecker" />
			</list>
		</property>
		<property name="plugins" ref="databasePluginManager" />
	</bean>

	<bean id="databasePluginManager" class="org.bibsonomy.database.plugin.DatabasePluginRegistry" factory-method="getInstance">
		<property name="defaultPlugins">
			<list>
				<bean class="org.bibsonomy.database.plugin.plugins.Logging" />
				<bean class="org.bibsonomy.database.plugin.plugins.BibTexExtraPlugin" />
				<bean class="org.bibsonomy.database.plugin.plugins.ClipboardPlugin">
					<property name="clipboardDatabaseManager" ref="clipboardDatabaseManager" />
				</bean>
				<bean class="org.bibsonomy.database.plugin.plugins.DiscussionPlugin" />
				<bean class="org.bibsonomy.database.plugin.plugins.GoldStandardPublicationPlugin">
					<property name="service" ref="goldStandardInformationService"/>
				</bean>
				<bean class="org.bibsonomy.database.plugin.plugins.MetaDataPlugin" />
				<bean class="org.bibsonomy.database.plugin.plugins.PersonPostConnectorPlugin">
					<constructor-arg ref="personDatabaseManager" />
					<constructor-arg ref="groupDatabaseManager" />
					<constructor-arg ref="crisLinkDatabaseManger" />
				</bean>
				<bean class="org.bibsonomy.database.plugin.plugins.ProjectPlugin" />
				<bean class="org.bibsonomy.database.plugin.plugins.CRISLinkPlugin">
					<constructor-arg value="${system.cris}" />
					<constructor-arg ref="personDatabaseManager" />
					<constructor-arg ref="crisLinkDatabaseManger" />
				</bean>
			</list>
		</property>
	</bean>

	<util:map id="metaDataProviders">
		<entry>
			<key>
				<bean class="java.lang.Class" factory-method="forName">
					<constructor-arg value="org.bibsonomy.model.logic.query.statistics.meta.DistinctFieldQuery" />
				</bean>
			</key>
			<bean class="org.bibsonomy.database.managers.metadata.DistinctFieldProvider">
				<constructor-arg>
					<map>
						<entry key-ref="projectClass">
							<bean class="org.bibsonomy.database.managers.metadata.ProjectMetaDataAdapter">
								<constructor-arg ref="projectSearch" />
							</bean>
						</entry>
						<entry key-ref="goldStandardPublicationClass">
							<bean class="org.bibsonomy.database.managers.metadata.ResourceMetaDataProvider">
								<constructor-arg ref="goldStandardPublicationSearch" />
							</bean>
						</entry>
						<entry key-ref="publicationClass">
							<bean class="org.bibsonomy.database.managers.metadata.ResourceMetaDataProvider">
								<constructor-arg ref="publicationSearch" />
							</bean>
						</entry>
					</map>
				</constructor-arg>
			</bean>
		</entry>
	</util:map>
	
	<bean id="mainDataSource" class="${database.datasource.class}" parent="basicDataSource">
		<property name="driverClassName" value="${database.main.driverClassName}" />
		<property name="url" value="${database.main.url}" />
		<property name="username" value="${database.main.username}" />
		<property name="password" value="${database.main.password}" />
		<property name="maxIdle" value="${database.main.maxIdle}" />
		<property name="maxTotal" value="${database.main.maxTotal}" />
		<property name="maxWaitMillis" value="${database.main.maxWait}" />
		<property name="removeAbandonedOnMaintenance" value="${database.main.removeAbandoned}" />
		<property name="removeAbandonedOnBorrow" value="${database.main.removeAbandoned}" />
		<property name="removeAbandonedTimeout" value="${database.main.removeAbandonedTimeout}" />
	</bean>
	
	<bean id="mainSqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">
		<property name="configLocation" value="classpath:SqlMapConfig.xml" />
		<property name="dataSource" ref="mainDataSource" />
		<property name="transactionConfigClass" value="com.ibatis.sqlmap.engine.transaction.jdbc.JdbcTransactionConfig" />
	</bean>
	
	<!-- holdes schema informations from the database -->
	<bean id="dbSchemaInformation" class="org.bibsonomy.database.util.DatabaseSchemaInformation" init-method="init">
		<property name="client" ref="mainSqlMapClient" />
	</bean>
	
	<bean id="dbSessionFactory" class="org.bibsonomy.database.common.impl.SqlMapClientDBSessionFactory">
		<property name="client" ref="mainSqlMapClient" />
	</bean>
	
</beans>