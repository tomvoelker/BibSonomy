<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	                    http://www.springframework.org/schema/util 
	                    http://www.springframework.org/schema/util/spring-util-3.0.xsd">
	
	
	 <!-- +
    	 | itemrecommender datasource and mappings setup for logging and configuration
    	 + -->
    	 
	<bean id="itemRecommenderSqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">
        <property name="configLocation" value="classpath:log_items/SqlMapConfig_recommender.xml" />
        <property name="dataSource" ref="itemRecommenderDataSource" />
        <property name="transactionConfigClass" value="com.ibatis.sqlmap.engine.transaction.jdbc.JdbcTransactionConfig" />
    </bean>
	
	<bean id="itemRecommenderSessionFactory" class="org.bibsonomy.database.common.impl.SqlMapClientDBSessionFactory">
		<property name="client" ref="itemRecommenderSqlMapClient" />
	</bean>
    
    <bean id="itemRecommenderSessionFactoryWrapper" class="org.bibsonomy.recommender.connector.database.session.SQLMapRecommenderDBSessionFactoryWrapper">
    	<property name="sessionFactory" ref="itemRecommenderSessionFactory" />
    </bean>
    
    <bean id="recommendationItemFactory" class="org.bibsonomy.recommender.connector.factories.ConnectorItemFactory" />
    
    <bean id="itemRecommenderLogic" class="recommender.impl.database.DBLogConfigItemAccess">
    	<property name="recommenderFactory" ref="itemRecommenderSessionFactoryWrapper" />
    	<property name="itemFactory" ref="recommendationItemFactory" />
    </bean>
    
    
    <!-- +
    	 | tagrecommender datasource and mappings setup for logging and configuration
    	 + -->
    	 
    <bean id="tagRecommenderSqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">
        <property name="configLocation" value="classpath:log_tags/SqlMapConfig_recommenderBibSonomy.xml" />
        <property name="dataSource" ref="tagRecommenderDataSource" />
        <property name="transactionConfigClass" value="com.ibatis.sqlmap.engine.transaction.jdbc.JdbcTransactionConfig" />
    </bean>
    
    <bean id="tagRecommenderSessionFactory" class="org.bibsonomy.database.common.impl.SqlMapClientDBSessionFactory">
		<property name="client" ref="tagRecommenderSqlMapClient" />
	</bean>
    
    <bean id="tagRecommenderSessionFactoryWrapper" class="org.bibsonomy.recommender.connector.database.session.SQLMapRecommenderDBSessionFactoryWrapper">
    	<property name="sessionFactory" ref="tagRecommenderSessionFactory" />
    </bean>
    
    <bean id="tagRecommenderLogic" class="org.bibsonomy.recommender.connector.database.DBLogConfigBibSonomy">
    	<property name="recommenderFactory" ref="tagRecommenderSessionFactoryWrapper" />
    </bean>
    
    
    <!-- +
    	 | recommender BibSonomy datasource and mappings setup
    	 + -->
    
    <bean id="recommenderMainSqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">
        <property name="configLocation" value="classpath:resolver/SqlMapConfig_recommenderBibDB.xml" />
        <property name="dataSource" ref="mainDataSource" />
        <property name="transactionConfigClass" value="com.ibatis.sqlmap.engine.transaction.jdbc.JdbcTransactionConfig" />
    </bean>
    
    <bean id="recommenderMainSessionFactory" class="org.bibsonomy.database.common.impl.SqlMapClientDBSessionFactory">
		<property name="client" ref="recommenderMainSqlMapClient" />
	</bean>
	
	    <bean id="recommenderMainSessionFactoryWrapper" class="org.bibsonomy.recommender.connector.database.session.SQLMapRecommenderDBSessionFactoryWrapper">
    	<property name="sessionFactory" ref="recommenderMainSessionFactory" />
    </bean>
    
    
    <!-- +
    	 | factories for bookmark and bibtex recommendations
    	 + -->
    	 
    <bean id="recommenderBibTexMainLogic" class="org.bibsonomy.recommender.connector.database.RecommenderBibTexDBLogic">
    	<property name="mainFactory" ref="recommenderMainSessionFactoryWrapper" />
    </bean>
    
    <bean id="recommenderBookmarkMainLogic" class="org.bibsonomy.recommender.connector.database.RecommenderBookmarkDBLogic">
    	<property name="mainFactory" ref="recommenderMainSessionFactoryWrapper" />
    </bean>
    
</beans>