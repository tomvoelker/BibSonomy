<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:security="http://www.springframework.org/schema/security"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
		http://www.springframework.org/schema/security  http://www.springframework.org/schema/security/spring-security-3.1.xsd
		http://www.springframework.org/schema/util      http://www.springframework.org/schema/util/spring-util-3.1.xsd
		http://www.springframework.org/schema/context   http://www.springframework.org/schema/context/spring-context-3.1.xsd" default-lazy-init="true">

	<!-- ################################################################################## --> 
	<!-- 				!!!ATTENTION!!! - !!!ATTENTION!!! - !!!ATTENTION!!! 				-->
	<!--  																					-->
	<!-- 		This File is overlayed by puma-customized/bibsonomy-webapp-stuttgart	 	-->
	<!-- 																					-->
	<!-- 				!!!ATTENTION!!! - !!!ATTENTION!!! - !!!ATTENTION!!! 				-->
	<!-- ################################################################################## --> 



	<!-- IDP Metadata configuration - paths to metadata of IDPs in circle of trust is here -->
	<!-- Do no forget to call iniitalize method on providers -->
	<bean id="metadata" class="org.springframework.security.saml.metadata.CachingMetadataManager">
		<constructor-arg>
			<list>
                <!-- <bean class="org.springframework.security.saml.metadata.ExtendedMetadataDelegate">
                    <constructor-arg>
                        <bean class="org.opensaml.saml2.metadata.provider.FilesystemMetadataProvider">
                            <constructor-arg>
                                <value type="java.io.File">classpath:security/idp.xml</value>
                            </constructor-arg>
                            <property name="parserPool" ref="parserPool"/>
                        </bean>
                    </constructor-arg>
                    <constructor-arg>
                        <bean class="org.springframework.security.saml.metadata.ExtendedMetadata">
                        </bean>
                    </constructor-arg>
                </bean> -->
                 
				<bean class="org.opensaml.saml2.metadata.provider.FilesystemMetadataProvider">
					<constructor-arg>
						<value type="java.io.File">${auth.saml.idp.1.metadata.file}</value>
					</constructor-arg>
					<property name="parserPool" ref="parserPool" />
				</bean>

				<!-- 
				<bean class="org.opensaml.saml2.metadata.provider.HTTPMetadataProvider">
					<constructor-arg>
						<value type="java.lang.String">${auth.saml.idp.1.metadata.url}</value>
					</constructor-arg>
					<constructor-arg>
						<value type="int">5000</value>
					</constructor-arg>
					<property name="parserPool" ref="parserPool" />
				</bean>
				 -->
			</list>
		</constructor-arg>
		<!-- OPTIONAL used when one of the metadata files contains information about this service provider -->
		<!-- <property name="hostedSPName" value=""/> -->
		<!-- OPTIONAL property: can tell the system which IDP should be used for authenticating user by default. -->
		<property name="defaultIDP" value="${auth.saml.defaultIdp}" />
	</bean>
		
	<bean id="samlAttributeExtractor" class="org.bibsonomy.webapp.util.spring.security.userattributemapping.SamlUserAttributeMapping">
		<property name="samlToUserPropertiesMap">
			<map>
				<!-- TODO -->
			</map>
		</property>
		<property name="useridAttributeName" value="${auth.saml.attr.userId}"/>
		<!-- 
		<property name="useridAttributeName" value="de.hebis.userid"/>
		 -->
	</bean>
	
</beans>