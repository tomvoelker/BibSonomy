<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="controllerBase" class="org.bibsonomy.webapp.util.spring.controller.MinimalisticControllerSpringWrapper" abstract="true">
	</bean>

	<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="interceptors">
			<list>
				<ref local="localeChangeInterceptor"/>
			</list>
		</property>	
		<property name="urlMap">
			<map>
				<entry key="/homepage/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="homepageController"/>
					</bean>
				</entry>
				<entry key="/user/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="userPageController"/>
					</bean>
				</entry>				
				<entry key="/group/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="groupPageController"/>
					</bean>
				</entry>	
				<entry key="/viewable/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="viewablePageController"/>
					</bean>
				</entry>
				<entry key="/tag/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="tagPageController"/>
					</bean>
				</entry>
				<entry key="/author/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="authorPageController"/>
					</bean>
				</entry>	
				<entry key="/concept/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="conceptPageController"/>
					</bean>
				</entry>	
				<entry key="/friends/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="friendsPageController"/>
					</bean>
				</entry>	
				<entry key="/friend/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="friendPageController"/>
					</bean>
				</entry>
				<entry key="/bibtexkey/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="bibtexkeyPageController"/>
					</bean>
				</entry>				
				<entry key="/bibtex/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="bibtexPageController"/>
					</bean>
				</entry>				 
				<entry key="/search/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="searchPageController"/>
					</bean>
				</entry>
				<entry key="/admin/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="adminPageController"/>
					</bean>
				</entry>	
				<entry key="/ajax/">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="ajaxController"/>
					</bean>
				</entry>					
			</map>
		</property>
	</bean>
			<bean id="homepageController" class="org.bibsonomy.webapp.controller.HomepageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>

	<bean id="userPageController" class="org.bibsonomy.webapp.controller.UserPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="groupPageController" class="org.bibsonomy.webapp.controller.GroupPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="viewablePageController" class="org.bibsonomy.webapp.controller.ViewablePageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="tagPageController" class="org.bibsonomy.webapp.controller.TagPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="authorPageController" class="org.bibsonomy.webapp.controller.AuthorPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
			</list>
		</property>
	</bean>

	<bean id="conceptPageController" class="org.bibsonomy.webapp.controller.ConceptPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="friendsPageController" class="org.bibsonomy.webapp.controller.FriendsPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="friendPageController" class="org.bibsonomy.webapp.controller.FriendPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="bibtexPageController" class="org.bibsonomy.webapp.controller.BibtexPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>	 
	 
	<bean id="bibtexkeyPageController" class="org.bibsonomy.webapp.controller.BibtexkeyPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
			</list>
		</property>
	</bean>
	 
	
	<bean id="searchPageController" class="org.bibsonomy.webapp.controller.SearchPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
		<property name="listsToInitialise">
			<list>
				<value type="java.lang.Class">org.bibsonomy.model.BibTex</value>
				<value type="java.lang.Class">org.bibsonomy.model.Bookmark</value>
			</list>
		</property>
	</bean>
	
	<bean id="adminPageController" class="org.bibsonomy.webapp.controller.AdminPageController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
	</bean>
	
	<bean id="ajaxController" class="org.bibsonomy.webapp.controller.AdminAjaxController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
	</bean>	
	
	<bean id="requestHolder" class="org.bibsonomy.webapp.util.spring.factorybeans.Holder" scope="request"/>

	<bean id="request" class="org.bibsonomy.webapp.util.spring.factorybeans.RequestFactoryBean" scope="request">
		<property name="requestHolder"><ref bean="requestHolder"/></property>
	</bean>
	
	<bean id="postLogic" class="org.bibsonomy.webapp.util.spring.factorybeans.PostLogicFactoryBean" scope="request">
		<property name="user" ref="loginUser"/>
		<property name="dbSessionFactory" ref="dbSessionFactory"/>
	</bean>
	
	<bean id="logic" class="org.bibsonomy.webapp.util.spring.factorybeans.LogicFactoryBean" scope="request">
		<property name="user" ref="loginUser"/>
		<property name="dbSessionFactory" ref="dbSessionFactory"/>
	</bean>	
	
	<bean id="dbSessionFactory" class="org.bibsonomy.database.util.IbatisDBSessionFactory">
	</bean>
	
	<bean id="userSettings" class="org.bibsonomy.webapp.util.spring.factorybeans.UserSettingsFactoryBean" scope="request">
		<property name="user" ref="loginUser"/>
	</bean>
	
	<bean id="loginUser" class="org.bibsonomy.webapp.util.spring.factorybeans.UserFactoryBean" scope="request">
		<property name="request" ref="request"/>
	</bean>	
	
	<bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
		<property name="paramName" value ="lang" />
	</bean>	
	
	<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver"/>
	
	<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basenames" value="messages"/>
	</bean>	
	  
	<bean id="viewResolver"	class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
		<property name="prefix" value="/WEB-INF/jsp/" />
		<property name="suffix" value=".jspx" />
	</bean>
		
</beans>