<jsp:root version="2.0" 
    xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
	xmlns:jsp="http://java.sun.com/JSP/Page"
	xmlns:mtl="urn:jsptld:/WEB-INF/taglibs/mytaglib.tld"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:parts="urn:jsptagdir:/WEB-INF/tags/bstags/layout/parts"
	xmlns:bform="urn:jsptagdir:/WEB-INF/tags/bstags/layout/form"
	xmlns:buttons="urn:jsptagdir:/WEB-INF/tags/bstags/buttons"
	xmlns:form="http://www.springframework.org/tags/form">
	
	<jsp:directive.attribute name="post" type="org.bibsonomy.model.Post" required="true"/>
	<jsp:directive.attribute name="comparePost" type="org.bibsonomy.model.Post" required="true"/>
	<c:set var="maximized" value="${not command.context.loginUser.settings.layoutSettings.simpleInterface}" />
	<bform:fieldset maximized="${maximized}" legendKey="post.resource.fields.detailed">
		<jsp:attribute name="legendExt">
	      (<a id="collapse" data-show-all="false"><fmt:message key="post.resource.fields.detailed.show.all"/></a>)
	   	</jsp:attribute>
        
        <jsp:attribute name="content">
        
        	<bform:diffField path="post.resource.booktitle" pathDiff="comparePost.resource.booktitle" small="true" required="true" />
        	<bform:diffField path="post.resource.journal" pathDiff="comparePost.resource.journal" small="true" required="true" />
        	<bform:diffField path="post.resource.volume" pathDiff="comparePost.resource.volume" small="true" required="true" />
        	<bform:diffField path="post.resource.number" pathDiff="comparePost.resource.number" small="true" required="true" />
        	<bform:diffField path="post.resource.pages" pathDiff="comparePost.resource.pages" small="true" required="true" />
        	<bform:diffField path="post.resource.month" pathDiff="comparePost.resource.month" small="true" required="true" />
        	<bform:diffField path="post.resource.day" pathDiff="comparePost.resource.day" small="true" required="true" />
        	<bform:diffField path="post.resource.publisher" pathDiff="comparePost.resource.publisher" small="true" required="true" />
        	<bform:diffField path="post.resource.address" pathDiff="comparePost.resource.address" small="true" required="true" />
        	<bform:diffField path="post.resource.edition" pathDiff="comparePost.resource.edition" small="true" required="true" />
        	<bform:diffField path="post.resource.chapter" pathDiff="comparePost.resource.chapter" small="true" required="true" />
        	<bform:diffField path="post.resource.url" pathDiff="comparePost.resource.url" small="true" required="true" />
        	<bform:diffField path="post.resource.key" pathDiff="comparePost.resource.key" small="true" required="true" />
        	<bform:diffField path="post.resource.type" pathDiff="comparePost.resource.type" small="true" required="true" />
        	<bform:diffField path="post.resource.howpublished" pathDiff="comparePost.resource.howpublished" small="true" required="true" />
        	<bform:diffField path="post.resource.institution" pathDiff="comparePost.resource.institution" small="true" required="true" />
        	<bform:diffField path="post.resource.organization" pathDiff="comparePost.resource.organization" small="true" required="true" />
        	<bform:diffField path="post.resource.school" pathDiff="comparePost.resource.school" small="true" required="true" />
        	<bform:diffField path="post.resource.series" pathDiff="comparePost.resource.series" small="true" required="true" />
        	<bform:diffField path="post.resource.crossref" pathDiff="comparePost.resource.crossref" small="true" required="true" />
        	<bform:diffField path="post.resource.misc" pathDiff="comparePost.resource.misc" small="true" required="true" />
        	<bform:diffField path="post.resource.abstract" pathDiff="comparePost.resource.abstract" small="true" required="true" rows="3"/>
        	
        	<!-- diff button -->
	    	<div style="cursor:pointer; float:left; margin-top: 2px; margin-bottom: 2px; margin-left: 5px; margin-right: 5px">
	    		<img src="${resdir}/image/button_reload.png" alt="reload diff" title="reload diff" onclick="javascript:diff()" />
	    	</div> 
        	
        </jsp:attribute>
     </bform:fieldset> 
      <bform:fieldset maximized="${maximized}" legendKey="post.resource.fields.comments" >
	     <jsp:attribute name="content">
         
			<bform:diffField path="post.description" pathDiff="comparePost.description" small="true" required="true" rows="3"/>
			<bform:diffField path="post.resource.privnote" pathDiff="comparePost.resource.privnote" small="true" required="true" rows="3"/>
            <bform:diffField path="post.resource.annote" pathDiff="comparePost.resource.annote" small="true" required="true" />
        	<bform:diffField path="post.resource.note" pathDiff="comparePost.resource.note" small="true" required="true" />

    	</jsp:attribute>
	</bform:fieldset>

</jsp:root>