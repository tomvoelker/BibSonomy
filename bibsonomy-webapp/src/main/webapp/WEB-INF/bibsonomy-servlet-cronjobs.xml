<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:task="http://www.springframework.org/schema/task"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
						http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/task
						http://www.springframework.org/schema/task/spring-task-3.2.xsd">

	<task:scheduler id="searchUpdateScheduler" pool-size="10"/>

	<task:scheduled-tasks scheduler="searchUpdateScheduler">
		<task:scheduled ref="elasticsearchBookmarkManager" method="updateIndex" cron="0 */5 * * * ?" />
		<task:scheduled ref="elasticsearchPublicationManager" method="updateIndex" cron="0,30 * * * * ?" />
		<task:scheduled ref="elasticsearchCommunityBookmarkManager" method="updateIndex" cron="0 */5 * * * ?" />
		<task:scheduled ref="elasticsearchCommunityPublicationManager" method="updateIndex" cron="5,35 * * * * ?" />
		<task:scheduled ref="elasticsearchGroupManager" method="updateIndex" cron="10,40 * * * * ?" />
		<task:scheduled ref="elasticsearchPersonManager" method="updateIndex" cron="15,45 * * * * ?" />
		<task:scheduled ref="elasticsearchProjectManager" method="updateIndex" cron="0 1/10 * * * ?" />
		<task:scheduled ref="helpSearchManager" method="reindex" cron="0 0,30 * * * ?" />
	</task:scheduled-tasks>

	<task:scheduler id="searchRegenerateScheduler" pool-size="10"/>

	<task:scheduled-tasks scheduler="searchRegenerateScheduler">
		<task:scheduled ref="elasticsearchBookmarkManager" method="regenerateAllIndices" cron="0 0 0 ? * SAT" />
		<task:scheduled ref="elasticsearchPublicationManager" method="regenerateAllIndices" cron="0 0 3 ? * SAT" />
		<task:scheduled ref="elasticsearchCommunityBookmarkManager" method="regenerateAllIndices" cron="0 0 0 ? * SUN" />
		<task:scheduled ref="elasticsearchCommunityPublicationManager" method="regenerateAllIndices" cron="0 0 3 ? * SUN" />
		<task:scheduled ref="elasticsearchGroupManager" method="regenerateAllIndices" cron="0 0 0 ? * MON" />
		<task:scheduled ref="elasticsearchPersonManager" method="regenerateAllIndices" cron="0 0 2 ? * MON" />
		<task:scheduled ref="elasticsearchProjectManager" method="regenerateAllIndices" cron="0 0 4 ? * MON" />
	</task:scheduled-tasks>

	<task:scheduler id="miscTaskScheduler" pool-size="10"/>

	<task:scheduled-tasks scheduler="miscTaskScheduler">
		<task:scheduled ref="pingback" method="clearQueue" fixed-delay="300000" initial-delay="300000" />
		<task:scheduled ref="autoSync" method="performAutoSync" cron="0 51 23 * * ?" />

		<!-- Only for debugging -->
		<!--<task:scheduled ref="autoSync" method="performAutoSync" fixed-delay="300000" initial-delay="30000" />-->
	</task:scheduled-tasks>

</beans>