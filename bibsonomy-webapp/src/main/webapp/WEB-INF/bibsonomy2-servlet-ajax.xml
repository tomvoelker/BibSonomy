<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	                    http://www.springframework.org/schema/beans/spring-beans.xsd
	                    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd">


	<!--+
		| url mapping for ajax request: /ajax/*
		+-->
	<bean id="ajaxUrlMapping" parent="urlMapping"
		class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="urlMap">
			<map merge="true">
				<entry key="/generalAjax">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="generalAjaxController"/>
						 <property name="allowedFields">
                            <list>
                                <value>action</value>
								<value>pageURL</value>
								<value>q</value>
								<value>requestedUser</value>
							</list>
						</property>
					</bean>
				</entry>
				<!-- get recommendations for user -->
				<entry key="/ajax/getBookmarkRecommendedTags">
					<bean parent="controllerBase">
						<property name="controllerBeanName"	value="ajaxGetBookmarkRecommendedTagsController" />
						<property name="allowedFields" ref="bookmarkRequestParameters" />
					</bean>
				</entry>
				<entry key="/ajax/getPublicationRecommendedTags">
					<bean parent="controllerBase">
						<property name="controllerBeanName"	value="ajaxGetPublicationRecommendedTagsController" />
						<property name="allowedFields" ref="publicationRequestParameters" />
					</bean>
				</entry>
				<entry key="/ajax/handleFollower">
					<bean parent="controllerBase">
						<property name="controllerBeanName"	value="followerAjaxController" />
						<property name="allowedFields" >
							<list>
								<value>requestedUserName</value>
								<value>action</value>
								<value>forward</value>
								<value>ckey</value>
							</list>
						</property>
					</bean>
				</entry>
				<entry key="/ajax/pickUnpickPost">
					<bean parent="controllerBase">
						<property name="controllerBeanName"	value="basketController" />
						<property name="allowedFields" >
							<list>
								<value>hash</value>
								<value>action</value>
								<value>user</value>
								<value>ckey</value>
							</list>
						</property>
					</bean>
				</entry>
				<entry key="/ajax/pickUnpickConcept">
					<bean parent="controllerBase">
						<property name="controllerBeanName"	value="conceptController" />
						<property name="allowedFields" >
							<list>
								<value>tag</value>
								<value>action</value>
								<value>ckey</value>
								<value>forward</value>
							</list>
						</property>
					</bean>
				</entry>
				<entry key="/ajax/goldstandards/references">
					<bean parent="controllerBase">
						<property name="controllerBeanName" value="editGoldstandardReferencesController"/>
						 <property name="allowedFields">
                            <list>
                                <value>action</value>
								<value>hash</value>
								<value>references</value>
							</list>
						</property>
					</bean>
				</entry>
				<entry key="/ajax/checkOpenAccess">
					<bean parent="controllerBase">
						<property name="controllerBeanName"	value="OpenAccessController" />
						<property name="allowedFields">
							<list>
								<value>publisher</value>
								<value>jTitle</value>
								<value>qType</value>
							</list>
						</property>
					</bean>
				</entry>
			</map>
		</property>
	</bean>


	<!--+
		| ajax controller
		+-->

	<bean id="generalAjaxController" class="org.bibsonomy.webapp.controller.ajax.GeneralAjaxController" scope="request">
		<property name="logic" ref="logic"/>
		<property name="userSettings" ref="userSettings"/>
	</bean>	
	
	<bean id="editGoldstandardReferencesController" class="org.bibsonomy.webapp.controller.ajax.EditGoldstandardReferencesController" scope="request">
		<property name="logic" ref="logic"/>
	</bean>	
		
		
	<!-- controller for handling recommendation requests -->
	<bean id="ajaxGetBookmarkRecommendedTagsController"
		class="org.bibsonomy.webapp.controller.ajax.GetBookmarkRecommendedTagsController"
		scope="request">
		<property name="logic" ref="logic" />
		<!-- used for accessing spam informations -->
		<property name="adminLogic" ref="adminLogic"/>  
		<property name="userSettings" ref="userSettings" />
		<property name="tagRecommender"	ref="multiplexingTagRecommender" />
		<!-- tag recommender used for spammer -->
		<property name="spamTagRecommender" ref="jensRecommender"/>
	</bean>
	
	<bean id="ajaxGetPublicationRecommendedTagsController"
		class="org.bibsonomy.webapp.controller.ajax.GetPublicationRecommendedTagsController"
		scope="request">
		<property name="logic" ref="logic" />
		<!-- used for accessing spam informations -->
		<property name="adminLogic" ref="adminLogic"/>
		<property name="userSettings" ref="userSettings" />
		<property name="tagRecommender" ref="multiplexingTagRecommender" />
		<!-- tag recommender used for spammer -->
		<property name="spamTagRecommender" ref="jensRecommender"/>
	</bean>
	
	
	<bean id="followerAjaxController" class="org.bibsonomy.webapp.controller.ajax.FollowerAjaxController" scope="request">
		<property name="logic" ref="logic" />
	</bean>
	
	
	<bean id="basketController" class="org.bibsonomy.webapp.controller.ajax.BasketController" scope="request">
		<property name="logic" ref="logic" />
		<property name="requestLogic" ref="requestLogic"/>
	</bean>
	
	<bean id="conceptController" class="org.bibsonomy.webapp.controller.ajax.ConceptController" scope="request">
		<property name="logic" ref="logic" />
		<property name="requestLogic" ref="requestLogic"/>
	</bean>

	
	<bean id="OpenAccessController" class="org.bibsonomy.webapp.controller.ajax.OpenAccessController" scope="request">
		<property name="logic" ref="logic"/>
	</bean>	
	
</beans>
