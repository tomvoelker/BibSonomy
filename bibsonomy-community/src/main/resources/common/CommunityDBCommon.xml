<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Common">
	<resultMap id="resource" class="resource" groupBy="intraHash">
		<result property="interHash"   column="interHash"       javaType="string" />
		<result property="intraHash"   column="intraHash"       javaType="string" />     	
		<!-- <result property="count"       column="count"           javaType="int" /> -->
        <result property="title"       column="title"           javaType="string" />
	</resultMap>

	<resultMap id="posts" class="post" groupBy="contentId">
		<result property="contentId"    column="content_id"     javaType="int" />
<!-- 		<result property="tags"         resultMap="Common.tag" />  -->
		<result property="date"         column="date"           javaType="date" />
		<result property="user"         resultMap="Common.user" />
		<result property="description"  column="description"    javaType="string" />
	</resultMap>
	
	<resultMap id="tag" class="tag" groupBy="name">
		<result property="name" column="tag_name" javaType="string" />
		<result property="weight" column="weight" javaType="double" />
	</resultMap>

	<resultMap id="tagCount" class="tag" groupBy="name">
		<result property="name" column="name" javaType="string" />
		<result property="globalcount" column="count" javaType="integer" />
		<result property="weight" column="weight" javaType="double" />
	</resultMap>
	
	<resultMap id="user" class="user" groupBy="name">
		<result property="name" column="user_name" javaType="string" />
	</resultMap>
	
	<resultMap id="communityMember" class="user" groupBy="name">
		<result property="name" column="user_name" javaType="string" />
		<result property="weight" column="weight" javaType="double" />
	</resultMap>

	<resultMap id="communityAffiliation" class="communityParam">
		<result property="communityID" column="community_uid" javaType="integer"/>
		<result property="weight" column="weight" javaType="double"/>
	</resultMap>
	
	<resultMap id="communityBookmarks" class="resourceCluster">
		<result property="clusterID" column="community_id" javaType="integer"/>
		<result property="bookmark" resultMap="BookmarkCommon.communityBookmarkPost"/>
	</resultMap>
</sqlMap>