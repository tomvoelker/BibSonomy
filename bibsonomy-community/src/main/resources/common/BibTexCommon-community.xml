<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="BibTexCommon">
	<resultMap id="bibtex_common" class="bibtex" extends="Common.resource">
		<result property="address"        column="address"        javaType="string" />
		<result property="annote"         column="annote"         javaType="string" />
		<result property="booktitle"      column="booktitle"      javaType="string" />
		<result property="chapter"        column="chapter"        javaType="string" />
		<result property="crossref"       column="crossref"       javaType="string" />
		<result property="edition"        column="edition"        javaType="string" />
		<result property="howpublished"   column="howpublished"   javaType="string" />
		<result property="institution"    column="institution"    javaType="string" />
		<result property="journal"        column="journal"        javaType="string" />
		<result property="key"            column="bkey"           javaType="string" />
		<result property="month"          column="month"          javaType="string" />
		<result property="note"           column="note"           javaType="string" />
		<result property="number"         column="number"         javaType="string" />
		<result property="organization"   column="organization"   javaType="string" />
		<result property="privnote"       column="privnote"       javaType="string" />
		<result property="pages"          column="pages"          javaType="string" />
		<result property="publisher"      column="publisher"      javaType="string" />
		<result property="school"         column="school"         javaType="string" />
		<result property="series"         column="series"         javaType="string" />
		<result property="type"           column="type"           javaType="string" />
		<result property="volume"         column="volume"         javaType="string" />
		<result property="day"            column="day"            javaType="string" />
		<result property="url"            column="url"            javaType="string" />
		<result property="bibtexKey"      column="bibtexKey"      javaType="string" />
		<result property="misc"           column="misc"           javaType="string" />
		<result property="abstract"       column="bibtexAbstract" javaType="string" />
		<result property="author"         column="author"         javaType="string" />
		<result property="editor"         column="editor"         javaType="string" />
		<result property="year"           column="year"           javaType="string" />
		<result property="entrytype"      column="entrytype"      javaType="string" />
	</resultMap>
	
	<resultMap id="bibtex" class="bibtex" extends="bibtex_common">
		<result property="scraperId"      column="scraperid"      javaType="int" />
	</resultMap>
	
	<resultMap id="bibtexPost" class="communityPost" extends="Common.posts">
		<result property="resource"   resultMap="BibTexCommon.bibtex" />
	</resultMap>

	<resultMap id="communityBibtexPost" class="communityPost" extends="bibtexPost">
		<result property="communityId"    column="community_id" />
	</resultMap>


	<sql id="commonBibtexAttributes">
		b.address, b.annote, b.booktitle, b.chapter, b.crossref, b.edition, b.howpublished,
		b.institution, b.journal, b.bkey, b.month, b.note, b.number, b.organization, b.pages, b.publisher,
		b.school, b.series, b.type, b.volume, b.day, b.url, b.content_id, b.description, b.bibtexKey, b.misc,
		b.bibtexAbstract, b.user_name, b.date, b.title, b.author, b.editor, b.year, b.entrytype, b.privnote
	</sql>

	<sql id="allBibtexAttributes">
		<include refid="commonBibtexAttributes"/>, b.scraperid
	</sql>

	<sql id="allBibtexAttributesWithSimHashes">
		<include refid="allBibtexAttributes"/>,
		<include refid="bibtexSimHashes"/>
	</sql>

	
	<sql id="bibtexSimHashes">
		b.simhash1 AS interHash, b.simhash2 AS intraHash
	</sql>
	
</sqlMap>