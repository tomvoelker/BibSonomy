<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="TypeTest">
	<typeAlias alias="user" type="org.bibsonomy.model.User" />
	<typeAlias alias="byUser" type="org.bibsonomy.ibatis.params.ByUser" />

	<resultMap id="user" class="user">
		<result property="name"     column="name"     javaType="string" />
		<result property="realname" column="realname" javaType="string" />
		<result property="email"    column="email"    javaType="string" />
      	<result property="homepage" column="homepage" javaType="string" />
		<result property="registrationDate" column="registrationDate" javaType="java.util.Date" />
	</resultMap>

	<select id="getByUser" resultMap="user" parameterClass="byUser">
	    SELECT * FROM users WHERE name = #user#
	    <isNotEmpty prepend="AND" property="registrationDate">
	       registrationDate <![CDATA[ < ]]> #registrationDate#
	    </isNotEmpty>
	</select>
	
	<parameterMap class="user" id="user">
		<parameter property="name"/>
		<parameter property="realname"/>
		<parameter property="email"/>
		<parameter property="homepage"/>	
	</parameterMap>
	
	
	<insert id="insertUser" parameterClass="user">
		INSERT INTO users (name,realname,email,homepage) VALUES (#name#,#realname#,#email#,#homepage#)	
	</insert>
	
</sqlMap>