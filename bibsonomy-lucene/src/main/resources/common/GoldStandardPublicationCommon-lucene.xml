<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="GoldStandardPublicationCommon">
	<resultMap id="goldStandardPublication" class="goldStandardPublication" extends="BibTexCommon.publication_common_without_privnote">
		<!-- to get a GoldStandardPublication object instead of a normal publication (aka bibtex) -->
	</resultMap>
	
	<resultMap id="posts" class="post" groupBy="contentId">
		<result property="contentId"    column="content_id"     javaType="int" />
		<result property="date"         column="date"           javaType="date" />
		<result property="groups"       resultMap="Common.group" />
		<result property="user"         resultMap="Common.user" />
		<result property="description"  column="description"    javaType="string" />
	</resultMap>
	
	<resultMap id="goldStandardPublicationPost" class="post" extends="GoldStandardPublicationCommon.posts">
		<result property="resource"   resultMap="GoldStandardPublicationCommon.goldStandardPublication" />
	</resultMap>
	
	<resultMap id="luceneGoldStandardPublicationPost" class="lucenePost" extends="goldStandardPublicationPost" />
	
	<sql id="allGoldStandardPublicationAttributesWithSimHashes">
		<include refid="allGoldStandardPublicationAttributes"/>,
		<include refid="bibtexSimHashes"/>
	</sql>
	
	<sql id="allGoldStandardPublicationAttributes">
		b.content_id, b.address, b.annote, b.booktitle, b.chapter, b.crossref, b.edition, b.howpublished,
		b.institution, b.journal, b.bkey, b.month, b.note, b.number, b.organization, b.pages, b.publisher,
		b.school, b.series, b.type, b.volume, b.day, b.url, b.description, b.bibtexKey, b.misc,
		b.bibtexAbstract, b.user_name, b.date, b.title, b.author, b.editor, b.year, b.entrytype
	</sql>
</sqlMap>